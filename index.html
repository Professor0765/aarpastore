<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CCTV सेटअप क्याल्कुलेटर | TWD Security</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #d32f2f;
      --dark: #23272e;
      --light: #fff;
      --gray: #f4f4f4;
      --border: #e0e0e0;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: var(--gray);
      color: var(--dark);
      margin: 0;
      padding: 0;
    }
    header {
      background: var(--dark);
      color: var(--light);
      padding: 1.5rem 0 1rem 0;
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: 1px;
      border-bottom: 4px solid var(--primary);
    }
    .container {
      max-width: 500px;
      margin: 2rem auto;
      background: var(--light);
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
      padding: 2rem 1.5rem 1.5rem 1.5rem;
    }
    .section {
      margin-bottom: 2rem;
    }
    label {
      font-weight: 500;
      margin-bottom: 0.5rem;
      display: block;
    }
    input[type="number"], select {
      width: 100%;
      padding: 0.7rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      margin-bottom: 1rem;
      font-size: 1rem;
    }
    input[type="file"] {
      margin-bottom: 1rem;
    }
    .summary {
      background: var(--gray);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border);
    }
    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    .summary-row.total {
      font-weight: 700;
      color: var(--primary);
      font-size: 1.2rem;
    }
    .whatsapp-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--primary);
      color: var(--light);
      border: none;
      border-radius: 8px;
      padding: 1rem;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      text-decoration: none;
      transition: background 0.2s;
    }
    .whatsapp-btn:hover {
      background: #b71c1c;
    }
    .model-info {
      font-size: 0.85rem;
      color: #666;
      margin-top: 0.3rem;
    }
    .price-display {
      font-weight: 600;
      color: var(--primary);
      margin-top: 0.3rem;
    }
    @media (max-width: 600px) {
      .container {
        max-width: 98vw;
        padding: 1rem 0.5rem;
      }
      header {
        font-size: 1.2rem;
        padding: 1rem 0 0.7rem 0;
      }
    }
  </style>
</head>
<body>
  <header>
    CCTV सेटअप क्याल्कुलेटर | TWD Security
  </header>
  <div class="container">
    <div class="section" id="pdf-section">
      <label for="pdf-upload">PDF रेट लिस्ट अपलोड गर्नुहोस् (Optional):</label>
      <input type="file" id="pdf-upload" accept="application/pdf">
      <div id="pdf-status" style="font-size:0.95rem;color:var(--primary);"></div>
    </div>
    <div class="section" id="camera-section">
      <!-- Camera selection UI will be injected here -->
    </div>
    <div class="section" id="nvr-section">
      <!-- NVR selection UI will be injected here -->
    </div>
    <div class="section" id="hdd-section">
      <!-- HDD selection UI will be injected here -->
    </div>
    <div class="section summary" id="summary-section">
      <!-- Price summary will be injected here -->
    </div>
    <a class="whatsapp-btn" id="whatsapp-btn" target="_blank">
      WhatsApp मा सम्पर्क गर्नुहोस्
    </a>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    // Hardcoded data extracted from PDF images
    const cameraData = [
      {
        model: "DH-IPC-HFW2449S-S-IL",
        name: "4MP Smart Dual Light Bullet Camera",
        price: 10507,
        specs: "4-MP 1/2.9\" CMOS image sensor, Outputs max. 4 MP (2688 × 1520) 20 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW2239MP-AS-LED-B-S2",
        name: "2MP Full-color Fixed-focal Bullet Camera",
        price: 7309,
        specs: "2-MP 1/2.8\" CMOS image sensor, Outputs max. 2 MP (1920 × 1080) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HDW2541T-S",
        name: "5MP Dome Camera",
        price: 9554,
        specs: "5-MP 1/2.8\" CMOS image sensor, Outputs max. 5 MP (2592 × 1944) @25/30 fps, Built-in IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW2831SP-S-S2",
        name: "8MP Bullet Camera",
        price: 13734,
        specs: "8-MP 1/2.8\" CMOS image sensor, Outputs max. 8 MP (3840 × 2160) @25/30 fps, Built-in IR LED, max illumination distance is 40 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "SD49225XA-HNR",
        name: "2MP 25x Starlight IP PTZ Camera",
        price: 15630,
        specs: "2-MP 1/2.8\" CMOS image sensor, 25x optical zoom, Outputs max. 2 MP (1920 × 1080) @25/30 fps, Built-in IR LED, max illumination distance is 150 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP66"
      },
      {
        model: "SD49425DB-HNY-GO-EAU",
        name: "4MP 25x Starlight IP PTZ Camera",
        price: 18756,
        specs: "4-MP 1/2.8\" CMOS image sensor, 25x optical zoom, Outputs max. 4 MP (2688 × 1520) @25/30 fps, Built-in IR LED, max illumination distance is 200 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP66"
      },
      {
        model: "DH-IPC-HDW1439V-A-IL",
        name: "4MP Entry Smart Dual Light Fixed-focal Eyeball Network Camera",
        price: 7309,
        specs: "4-MP 1/2.9\" CMOS image sensor, Outputs max. 4 MP (2560 × 1440) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW1439TL1-A-IL",
        name: "4MP Entry Smart Dual Light Fixed-focal Bullet Network Camera",
        price: 7309,
        specs: "4-MP 1/2.9\" CMOS image sensor, Outputs max. 4 MP (2560 × 1440) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HDW1639T-A-IL",
        name: "6MP Entry Smart Dual Light Fixed-focal Eyeball Network Camera",
        price: 8599,
        specs: "6-MP 1/2.8\" CMOS image sensor, Outputs max. 6 MP (3200 × 1800) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW1639TC-A-IL",
        name: "6MP Entry Smart Dual Light Fixed-focal Bullet Network Camera",
        price: 8599,
        specs: "6-MP 1/2.8\" CMOS image sensor, Outputs max. 6 MP (3200 × 1800) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW2230SP-S",
        name: "2MP IR IP Bullet Camera",
        price: 8222,
        specs: "2-MP 1/2.8\" CMOS image sensor, Outputs max. 2 MP (1920 × 1080) @25/30 fps, Built-in IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HDBW2230EP-S",
        name: "2MP Vandalproof Dome Camera",
        price: 9136,
        specs: "2-MP 1/2.8\" CMOS image sensor, Outputs max. 2 MP (1920 × 1080) @25/30 fps, Built-in IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67, IK10"
      },
      {
        model: "DH-IPC-HDBW2231RP-ZS",
        name: "2MP Motorized Starlight Dome Camera",
        price: 13704,
        specs: "2-MP 1/2.8\" CMOS image sensor, Motorized lens, Outputs max. 2 MP (1920 × 1080) @25/30 fps, Built-in IR LED, max illumination distance is 40 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW2231TP-ZS",
        name: "2MP Motorized Starlight Bullet Camera",
        price: 13704,
        specs: "2-MP 1/2.8\" CMOS image sensor, Motorized lens, Outputs max. 2 MP (1920 × 1080) @25/30 fps, Built-in IR LED, max illumination distance is 40 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HDW2439TP-AS-LED-S2",
        name: "4MP Full-Color Dome Camera",
        price: 10050,
        specs: "4-MP 1/2.8\" CMOS image sensor, Outputs max. 4 MP (2560 × 1440) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HFW2439SP-SA-LED-S2",
        name: "4MP Full-Color Bullet Camera",
        price: 10050,
        specs: "4-MP 1/2.8\" CMOS image sensor, Outputs max. 4 MP (2560 × 1440) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67"
      },
      {
        model: "DH-IPC-HDW2449T-S-PRO",
        name: "4MP Wi-Fi Color Fixed Eyeball Wireless Camera",
        price: 10278,
        specs: "4-MP 1/2.8\" CMOS image sensor, Outputs max. 4 MP (2560 × 1440) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67, Wi-Fi enabled"
      },
      {
        model: "DH-IPC-HFW2449M-S-B-PRO",
        name: "4MP Wi-Fi Color Fixed Bullet Wireless Camera",
        price: 10278,
        specs: "4-MP 1/2.8\" CMOS image sensor, Outputs max. 4 MP (2560 × 1440) @25/30 fps, Built-in warm light/IR LED, max illumination distance is 30 m, H.265 codec, WDR, 3D NR, HLC, BLC, Intrusion, tripwire, Motion detection, Abnormality detection, Perimeter Protection, Face detection, SMD, Audio/Alarm I/O, Built-in MIC, SD card support (max 256GB), 12V DC/PoE, IP67, Wi-Fi enabled"
      },
      {
        model: "DH-IPC-T2AP-PV",
        name: "2MP Dome Wi-Fi Smart Dual Light Active Deterrence",
        price: 5967,
        specs: "2MP (1920x1080) @25/30 fps, 1/3\" CMOS sensor, H.265 codec, built-in warm light and IR LED (30m max illumination), SMART H.264+/H.265+, DWDR, 3D NR, HLC, BLC, digital watermarking, Anomaly detection, supports max 256G Micro SD card, built-in Mic and speaker, 12 VDC power supply, IP67 protection, supports human detection, Wi-Fi enabled"
      },
      {
        model: "DH-IPC-F2CP-PV",
        name: "2MP Bullet Wi-Fi Smart Dual Light Active Deterrence",
        price: 5967,
        specs: "2MP (1920x1080) @25/30 fps, 1/3\" CMOS sensor, H.265 codec, built-in warm light and IR LED (30m max illumination), SMART H.264+/H.265+, DWDR, 3D NR, HLC, BLC, digital watermarking, Anomaly detection, supports max 256G Micro SD card, built-in Mic and speaker, 12 VDC power supply, IP67 protection, supports human detection, Wi-Fi enabled"
      },
      {
        model: "DH-IPC-T4AP-PV",
        name: "4MP Bullet Wi-Fi Smart Dual Light Active Deterrence",
        price: 6732,
        specs: "4MP (2560x1440) @25/30 fps, 1/3\" CMOS sensor, H.265 codec, built-in warm light and IR LED (30m max illumination), SMART H.264+/H.265+, Anomaly detection, supports max 256G Micro SD card, built-in Mic, 12 VDC power supply, IP67 protection, supports human detection, Wi-Fi enabled"
      },
      {
        model: "DH-IPC-F4CP-PV",
        name: "4MP Bullet Wi-Fi Smart Dual Light Active Deterrence",
        price: 6732,
        specs: "4MP (2560x1440) @25/30 fps, 1/3\" CMOS sensor, H.265 codec, built-in warm light and IR LED (30m max illumination), SMART H.264+/H.265+, Anomaly detection, supports max 256G Micro SD card, built-in Mic, 12 VDC power supply, IP67 protection, supports human detection, Wi-Fi enabled"
      },
      {
        model: "DH-H4A",
        name: "4MP Indoor Fixed-dome Wi-Fi & Tilt Network Camera",
        price: 4690,
        specs: "4MP (2560x1440) @25 fps, 1/3\" CMOS sensor, H.265 codec, built-in IR LED (10m max illumination), Supports max 256G Micro SD card, built-in Mic and speaker, 5 VDC power supply, supports Wi-Fi, supports motion detection, human detection"
      },
      {
        model: "DH-SD2A200HB-GN-AW-PV-S2",
        name: "2MP Full-color Network PTZ Camera",
        price: 6500,
        specs: "2MP (1920x1080) @25/30 fps, 1/2.8\" CMOS sensor, H.265 encoding, Human detection, tripwire, intrusion, Wi-Fi, two-way talk, sound and light alarm, IR and white light (three night view modes), IP66"
      }
    ];

    const nvrData = [
      {
        model: "DHI-NVR1104HS-S3",
        name: "4 Channel NVR",
        channels: 4,
        price: 6306,
        specs: "New 4.0 user interface, 4-ch 1080 30FPS, 80 Mbps for access, storage, forwarding, Remote surveillance features, 1 SATA 2.0 Port"
      },
      {
        model: "DHI-NVR1108HS-S3",
        name: "8 Channel NVR",
        channels: 8,
        price: 7206,
        specs: "New 4.0 user interface, 8-ch 1080 30FPS, 80 Mbps for access, storage, forwarding, Remote surveillance features, 1 SATA 2.0 Port"
      },
      {
        model: "DHI-NVR2104-4KS2",
        name: "4CH 4K NVR 1HDD",
        channels: 4,
        price: 9458,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 80 Mbps bandwidth, 1 SATA port, Remote surveillance"
      },
      {
        model: "NVR2116-S3",
        name: "16CH 4K NVR 1HDD",
        channels: 16,
        price: 11260,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 200 Mbps bandwidth, 1 SATA port, Remote surveillance"
      },
      {
        model: "NVR2208-4KS3",
        name: "8CH NVR 2HDD",
        channels: 8,
        price: 16440,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 160 Mbps bandwidth, 2 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR2216-4KS2",
        name: "16CH NVR 2HDD",
        channels: 16,
        price: 14638,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 320 Mbps bandwidth, 2 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR2216-I2",
        name: "16CH NVR 2HDD AI Sense",
        channels: 16,
        price: 17499,
        specs: "4K resolution support, AI features, Smart H.265+/Smart H.264+/H.265/H.264, 320 Mbps bandwidth, 2 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR4104-4KS2",
        name: "4CH 4K NVR 1HDD",
        channels: 4,
        price: 11563,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 80 Mbps bandwidth, 1 SATA port, Remote surveillance"
      },
      {
        model: "DHI-NVR4216-4KS2/L",
        name: "16CH 4K NVR 2HDD",
        channels: 16,
        price: 19621,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 320 Mbps bandwidth, 2 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR4232-4KS3",
        name: "32CH NVR 4HDD",
        channels: 32,
        price: 23450,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 384 Mbps bandwidth, 4 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR4416-EI",
        name: "16CH NVR 4HDD",
        channels: 16,
        price: 35892,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 320 Mbps bandwidth, 4 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR4432-4KS3",
        name: "32CH NVR 4HDD",
        channels: 32,
        price: 40677,
        specs: "4K resolution support, Smart H.265+/Smart H.264+/H.265/H.264, 384 Mbps bandwidth, 4 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR5216-4KS2",
        name: "16CH 4 Pro NVR 2HDD",
        channels: 16,
        price: 36003,
        specs: "4K resolution support, Pro features, Smart H.265+/Smart H.264+/H.265/H.264, 320 Mbps bandwidth, 2 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR5232-4KS2",
        name: "32CH 4 Pro NVR 2HDD",
        channels: 32,
        price: 45936,
        specs: "4K resolution support, Pro features, Smart H.265+/Smart H.264+/H.265/H.264, 384 Mbps bandwidth, 2 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR5432-4KS2",
        name: "32CH 4 Pro NVR 4HDD",
        channels: 32,
        price: 58003,
        specs: "4K resolution support, Pro features, Smart H.265+/Smart H.264+/H.265/H.264, 384 Mbps bandwidth, 4 SATA ports, Remote surveillance"
      },
      {
        model: "DHI-NVR5464-EI",
        name: "64 Channels 4HDD WizSense NVR",
        channels: 64,
        price: 90000,
        specs: "4K resolution support, WizSense features, Smart H.265+/Smart H.264+/H.265/H.264, 512 Mbps bandwidth, 4 SATA ports, Remote surveillance"
      }
    ];

    const hddData = [
      { size: "1TB", price: 6000, description: "1TB Seagate SkyHawk Lite HDD" },
      { size: "2TB", price: 13000, description: "2TB Seagate SkyHawk Lite HDD" }
    ];

    // Initialize the calculator
    let selectedCamera = null;
    let selectedNVR = null;
    let selectedHDD = null;
    let cameraQuantity = 0;

    function formatCurrency(amount) {
      return `Rs. ${amount.toLocaleString('en-IN')}`;
    }

    function renderCameraSection() {
      const section = document.getElementById('camera-section');
      section.innerHTML = `
        <label for="camera-quantity">क्यामेरा संख्या:</label>
        <input type="number" id="camera-quantity" min="1" max="64" value="1">
        
        <label for="camera-model">क्यामेरा मोडेल:</label>
        <select id="camera-model">
          <option value="">क्यामेरा छान्नुहोस्</option>
          ${cameraData.map(camera => `
            <option value="${camera.model}" data-price="${camera.price}">
              ${camera.model} - ${camera.name}
            </option>
          `).join('')}
        </select>
        <div id="camera-info" class="model-info"></div>
        <div id="camera-price" class="price-display"></div>
      `;

      // Add event listeners
      document.getElementById('camera-quantity').addEventListener('input', updateCalculations);
      document.getElementById('camera-model').addEventListener('change', updateCameraInfo);
    }

    function renderNVRSection() {
      const section = document.getElementById('nvr-section');
      section.innerHTML = `
        <label for="nvr-model">NVR मोडेल:</label>
        <select id="nvr-model">
          <option value="">NVR छान्नुहोस्</option>
          ${nvrData.map(nvr => `
            <option value="${nvr.model}" data-channels="${nvr.channels}" data-price="${nvr.price}">
              ${nvr.model} - ${nvr.name} (${nvr.channels} Channel)
            </option>
          `).join('')}
        </select>
        <div id="nvr-info" class="model-info"></div>
        <div id="nvr-price" class="price-display"></div>
      `;

      document.getElementById('nvr-model').addEventListener('change', updateNVRInfo);
    }

    function renderHDDSection() {
      const section = document.getElementById('hdd-section');
      section.innerHTML = `
        <label for="hdd-selection">HDD छान्नुहोस्:</label>
        <select id="hdd-selection">
          <option value="">HDD छोड्नुहोस्</option>
          ${hddData.map(hdd => `
            <option value="${hdd.size}" data-price="${hdd.price}">
              ${hdd.size} - ${hdd.description}
            </option>
          `).join('')}
        </select>
        <div id="hdd-price" class="price-display"></div>
      `;

      document.getElementById('hdd-selection').addEventListener('change', updateCalculations);
    }

    function updateCameraInfo() {
      const cameraSelect = document.getElementById('camera-model');
      const cameraInfo = document.getElementById('camera-info');
      const cameraPrice = document.getElementById('camera-price');
      
      if (cameraSelect.value) {
        const camera = cameraData.find(c => c.model === cameraSelect.value);
        if (camera) {
          selectedCamera = camera;
          cameraInfo.innerHTML = `<strong>Specifications:</strong> ${camera.specs}`;
          cameraPrice.innerHTML = `<strong>Price:</strong> ${formatCurrency(camera.price)}`;
        }
      } else {
        selectedCamera = null;
        cameraInfo.innerHTML = '';
        cameraPrice.innerHTML = '';
      }
      updateCalculations();
    }

    function updateNVRInfo() {
      const nvrSelect = document.getElementById('nvr-model');
      const nvrInfo = document.getElementById('nvr-info');
      const nvrPrice = document.getElementById('nvr-price');
      
      if (nvrSelect.value) {
        const nvr = nvrData.find(n => n.model === nvrSelect.value);
        if (nvr) {
          selectedNVR = nvr;
          nvrInfo.innerHTML = `<strong>Specifications:</strong> ${nvr.specs}`;
          nvrPrice.innerHTML = `<strong>Price:</strong> ${formatCurrency(nvr.price)}`;
        }
      } else {
        selectedNVR = null;
        nvrInfo.innerHTML = '';
        nvrPrice.innerHTML = '';
      }
      updateCalculations();
    }

    function updateCalculations() {
      const quantity = parseInt(document.getElementById('camera-quantity').value) || 0;
      cameraQuantity = quantity;

      // Auto-select NVR based on camera quantity
      const nvrSelect = document.getElementById('nvr-model');
      if (quantity > 0) {
        const requiredChannels = quantity <= 4 ? 4 : quantity <= 8 ? 8 : quantity <= 16 ? 16 : quantity <= 32 ? 32 : 64;
        const suitableNVR = nvrData.find(nvr => nvr.channels >= requiredChannels);
        if (suitableNVR) {
          nvrSelect.value = suitableNVR.model;
          selectedNVR = suitableNVR;
          updateNVRInfo();
        }
      }

      // Update HDD selection
      const hddSelect = document.getElementById('hdd-selection');
      const hddPrice = document.getElementById('hdd-price');
      if (hddSelect.value) {
        const hdd = hddData.find(h => h.size === hddSelect.value);
        if (hdd) {
          selectedHDD = hdd;
          hddPrice.innerHTML = `<strong>Price:</strong> ${formatCurrency(hdd.price)}`;
        }
      } else {
        selectedHDD = null;
        hddPrice.innerHTML = '';
      }

      updateSummary();
    }

    function updateSummary() {
      const summarySection = document.getElementById('summary-section');
      
      const cameraCost = selectedCamera ? selectedCamera.price * cameraQuantity : 0;
      const nvrCost = selectedNVR ? selectedNVR.price : 0;
      const hddCost = selectedHDD ? selectedHDD.price : 0;
      const total = cameraCost + nvrCost + hddCost;

      summarySection.innerHTML = `
        <h3 style="margin-top:0;color:var(--primary);">कुल लागत</h3>
        <div class="summary-row">
          <span>क्यामेरा लागत (${cameraQuantity} × ${selectedCamera ? selectedCamera.model : 'N/A'}):</span>
          <span>${formatCurrency(cameraCost)}</span>
        </div>
        <div class="summary-row">
          <span>NVR लागत (${selectedNVR ? selectedNVR.model : 'N/A'}):</span>
          <span>${formatCurrency(nvrCost)}</span>
        </div>
        <div class="summary-row">
          <span>HDD लागत (${selectedHDD ? selectedHDD.size : 'N/A'}):</span>
          <span>${formatCurrency(hddCost)}</span>
        </div>
        <div class="summary-row total">
          <span>कुल लागत:</span>
          <span>${formatCurrency(total)}</span>
        </div>
      `;

      // Update WhatsApp button
      updateWhatsAppButton(total);
    }

    function updateWhatsAppButton(total) {
      const whatsappBtn = document.getElementById('whatsapp-btn');
      const message = `नमस्ते! म CCTV सेटअप को लागि जानकारी लिन चाहन्छु। कुल लागत: ${formatCurrency(total)}। कृपया सम्पर्क गर्नुहोस्।`;
      const encodedMessage = encodeURIComponent(message);
      whatsappBtn.href = `https://wa.me/9779810036277?text=${encodedMessage}`;
    }

    // Initialize the calculator
    document.addEventListener('DOMContentLoaded', function() {
      renderCameraSection();
      renderNVRSection();
      renderHDDSection();
      updateCalculations();
    });
  </script>
</body>
</html>
